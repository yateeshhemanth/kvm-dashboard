services:
  dashboard:
    build: ./dashboard
    container_name: kvm-dashboard-api
    ports:
      - "8000:8000"
    environment:
      DATABASE_URL: sqlite:////data/kvm_dashboard.db
    volumes:
      - ./dashboard-data:/data

  host-agent:
    build: ./agent
    container_name: kvm-host-agent
    ports:
      - "9090:9090"
    environment:
      DASHBOARD_URL: http://dashboard:8000
      HOST_ID: kvm-host-01
      HOST_NAME: kvm-host-01
      HOST_ADDRESS: 192.168.1.101
      LIBVIRT_URI: qemu:///system
      HEARTBEAT_INTERVAL: 15
    depends_on:
      - dashboard
